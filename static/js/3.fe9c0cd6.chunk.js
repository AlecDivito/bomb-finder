(window.webpackJsonp=window.webpackJsonp||[]).push([[3,11],{102:function(e,t,i){"use strict";i.r(t);var a,n,s=i(1),r=i.n(s),o=i(3),c=i(8),h=i(9),l=i(16),u=i(15),d=i(17),g=i(0),v=i.n(g),m=i(68),f=i(63);!function(e){e[e.TOGGLE=0]="TOGGLE",e[e.MARK=1]="MARK"}(a||(a={})),function(e){e[e.GAME_PAUSED=0]="GAME_PAUSED",e[e.GAME_PLAY=1]="GAME_PLAY"}(n||(n={}));var p=i(62),b=i(66),y=i(64),k=function(){function e(t,i,n,s){Object(c.a)(this,e),this.games=void 0,this.settings=void 0,this.pieceRenderer=void 0,this.grid=[],this.updateRemainingPiecesCount=!1,this.remainingPieces=0,this.inputMode=a.TOGGLE,this.backgroundAnimation=void 0,this.height=void 0,this.width=void 0,this.offsetWidth=void 0,this.offsetHeight=void 0,this.overflowClasses="",this.games=t,this.settings=i,this.pieceRenderer=new b.a(i);var r=this.calculateBoardSize(this.games.width),o=this.calculateBoardSize(this.games.height);n>r?(this.width=n,this.offsetWidth=(this.width-r)/2):(this.overflowClasses+=" overflow-x",this.width=r,this.offsetWidth=0),s>o?(this.height=s,this.offsetHeight=(this.height-o)/2):(this.overflowClasses+=" overflow-y",this.height=o,this.offsetHeight=0),this.backgroundAnimation=new p.b(121,3),this.setMarkInput(),this.init()}return Object(h.a)(e,[{key:"setMarkInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.inputMode=e?a.MARK:a.TOGGLE,this.inputMode===a.MARK?(this.backgroundAnimation.setTarget(121),this.backgroundAnimation.setStep(3),this.backgroundAnimation.play()):this.inputMode===a.TOGGLE&&(this.backgroundAnimation.setTarget(0),this.backgroundAnimation.setStep(-3),this.backgroundAnimation.play())}},{key:"reset",value:function(){var e=Object(o.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.games.reset(this.games);case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",t.id);case 5:throw new Error("Had a problem saving old Game");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"logAndDestroy",value:function(){var e=Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.games.logAndDestroy();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(e){if(!this.games.isComplete){if(this.pieceRenderer.update(e),this.backgroundAnimation.update(e),this.games.gameHasStarted&&this.remainingPieces!==this.games.totalPieces){var t=e;this.games.time+=t}this.updateRemainingPiecesCount&&(this.remainingPieces=this.grid.reduce(function(e,t){return Object(f.g)(t.visibility)&&!Object(f.d)(t.value)?e-1:e},this.games.totalPieces),this.updateRemainingPiecesCount=!1,this.games.invisiblePieces=this.remainingPieces,this.games.update()),this.games.isComplete||"lost"!==this.games.result&&0!==this.remainingPieces||(this.grid.forEach(function(e){e.state===f.a.BOMB&&(e.visibility=f.b.VISIBLE)}),this.games.board=this.grid,"lost"===this.games.result?(this.games.result="lost",this.games.update()):0===this.remainingPieces&&(this.games.result="won",this.games.update()),this.games.isComplete=!0)}}},{key:"handleEvents",value:function(e){if(("inprogress"===this.games.result||"created"===this.games.result)&&e){if(e.events.includes("keydown")&&e.keys.includes("f")&&this.setMarkInput(this.inputMode===a.TOGGLE),e.events.includes("mousemove")){this.grid.forEach(function(e){e.hover=!1});var t=this.getIndexByPixel(e.pos);null!==t&&t<this.grid.length&&this.grid[t]&&(this.grid[t].hover=!0)}if(e.events.includes("mousedown")||e.events.includes("touch")){this.games.result="inprogress";var i=this.getIndexByPixel(e.pos);if(null===i||i>=this.grid.length)return;var n=this.grid[i];this.inputMode===a.TOGGLE&&e.leftClick&&n.visibility===f.b.INVISIBLE?(this.games.totalMoves++,Object(f.d)(n.value)&&this.remainingPieces===this.games.totalPieces?this.repositionBombCell(i):Object(f.d)(n.value)&&(this.games.result="lost"),0===n.value&&this.toggleCell(i),this.setCellVisibility(i)):(e.rightClick||e.leftClick&&this.inputMode===a.MARK)&&(this.games.totalMoves++,Object(f.e)(n.visibility)&&(n.visibility=n.visibility===f.b.MARKED?f.b.INVISIBLE:f.b.MARKED,this.markCell(i))),this.updateRemainingPiecesCount=!0}"lost"===this.games.result&&this.grid.forEach(function(e){Object(f.d)(e.value)&&(e.visibility=f.b.VISIBLE)})}}},{key:"repositionBombCell",value:function(e){var t=this,i=0;if(this.games.bombs/this.games.area>.75)for(;Object(f.d)(this.grid[i].value);)i++;else do{i=Object(y.a)(0,this.grid.length-1)}while(Object(f.d)(this.grid[i].value));this.grid[i]={hover:!1,visibility:f.b.INVISIBLE,state:f.a.BOMB,value:null},this.getNeighbors(e).forEach(function(e){if(!Object(f.d)(t.grid[e].value)){var i=Object(f.c)(t.grid[e].value);t.grid[e]=Object(m.a)({},t.grid[e],{value:Object(f.c)(i)})}});var a=this.getNeighbors(e).reduce(function(e,i){return Object(f.d)(t.grid[i].value)?e+1:e},0);this.grid[e]={hover:!1,visibility:f.b.INVISIBLE,state:f.a.CLEAN,value:a}}},{key:"init",value:function(){this.remainingPieces=this.games.invisiblePieces,0===this.games.board.length?(this.grid=this.constructGrid(),this.games.board=this.grid):this.grid=this.games.board}},{key:"toggleCell",value:function(e){for(var t=this.getNeighbors(e),i=[e];t.length>0;){var a=t.pop();if(0===this.grid[a].value&&!Object(f.f)(this.grid[a]))this.getNeighbors(a).forEach(function(e){t.includes(e)||i.includes(e)||t.push(e)});this.setCellVisibility(a),i.push(a)}}},{key:"markCell",value:function(e){var t=this;this.getNeighbors(e).forEach(function(e){var i=t.grid[e];Object(f.g)(i.visibility)&&!Object(f.d)(i.value)&&0!==i.value&&t.setCellVisibility(e)})}},{key:"setCellVisibility",value:function(e){var t=this;Object(f.f)(this.grid[e])||(null!==this.grid[e].value&&0!==this.grid[e].value&&this.getNeighbors(e).reduce(function(e,i){return t.grid[i].visibility===f.b.MARKED?e+1:e},0)>=this.grid[e].value?this.grid[e].visibility=f.b.VISIBLY_SATISFIED:this.grid[e].visibility=f.b.VISIBLE)}},{key:"getIndexByPixel",value:function(e){var t=this.settings.gridGapSize+this.settings.defaultCellSize,i=Math.floor((e.y-this.offsetHeight)/t),a=Math.floor((e.x-this.offsetWidth)/t),n=this.offsetHeight+(i*t+this.settings.gridGapSize),s=this.offsetWidth+(a*t+this.settings.gridGapSize);return i>=0&&a>=0&&a<this.games.width&&i<this.games.height&&function(e,t){return t.y>=e.top&&t.y<=e.top+e.size&&t.x>=e.left&&t.x<=e.left+e.size}({top:n,left:s,size:this.settings.defaultCellSize},e)?this.getIndex(i,a):null}},{key:"getIndex",value:function(e,t){return e*this.games.width+t}},{key:"constructGrid",value:function(){for(var e=[],t=0;t<this.games.area;t++)e.push(null);for(var i=this.games.bombs;i>0;){var a={hover:!1,visibility:f.b.INVISIBLE,state:f.a.BOMB},n=Math.floor(Math.random()*this.games.area);null===e[n]&&(i--,e[n]=a)}for(var s=0;s<e.length;s++)if(null===e[s]){for(var r=0,o=this.getNeighbors(s),c=0;c<o.length;c++){var h=o[c];null!==e[h]&&e[h].state===f.a.BOMB&&r++}var l={hover:!1,visibility:f.b.INVISIBLE,state:f.a.CLEAN,value:r};e[s]=l}return e}},{key:"getNeighbors",value:function(e){if(e<0||e>=this.games.area)return[];for(var t=Math.floor(e/this.games.width),i=e%this.games.width,a=[],n=0;n<8;n++){var s=t,r=i;switch(n){case 0:s-=1,r-=1;break;case 1:s-=1;break;case 2:s-=1,r+=1;break;case 3:r-=1;break;case 4:r+=1;break;case 5:s+=1,r-=1;break;case 6:s+=1;break;case 7:s+=1,r+=1}var o=this.getIndex(s,r);s>=0&&s<this.games.height&&r>=0&&r<this.games.width&&a.push(o)}return a}},{key:"draw",value:function(e,t){this.drawBackground(e),this.drawBoard(e,t)}},{key:"drawBackground",value:function(e){e.save();var t=e.createLinearGradient(this.width/2,this.height,this.width/2,0);t.addColorStop(.05,"#333"),t.addColorStop(1,"hsla(".concat(360-this.backgroundAnimation.getValue(),", 100%, 50%, 1)")),e.fillStyle=t,e.fillRect(0,0,this.width,this.height),e.restore()}},{key:"drawBoard",value:function(e,t){for(var i=this.settings.defaultCellSize+this.settings.gridGapSize,a=Math.max(this.width,t.width)-t.width,n=Math.max(this.height,t.height)-t.height,s=Math.floor(t.x/(i+a+1)),r=Math.floor(t.y/(i+n+1)),o=Math.min(Math.ceil((t.x+t.width-this.offsetWidth)/i)+1,this.games.width),c=Math.min(Math.ceil((t.y+t.height-this.offsetHeight)/i)+1,this.games.height),h=s;h<c;h++)for(var l=r;l<o;l++){var u=this.offsetWidth+this.calculateBoardSize(l),d=this.offsetHeight+this.calculateBoardSize(h),g=this.getIndex(h,l),v=this.grid[g];v&&this.pieceRenderer.drawPiece(e,v,u,d)}}},{key:"calculateBoardSize",value:function(e){return e*this.settings.defaultCellSize+(e+1)*this.settings.gridGapSize}},{key:"isInputModeToggle",get:function(){return a.TOGGLE===this.inputMode}},{key:"gameBoardOverflowClasses",get:function(){return this.overflowClasses}},{key:"gameBoardWidth",get:function(){return this.width}},{key:"gameBoardHeight",get:function(){return this.height}},{key:"gameState",get:function(){return this.games.result}},{key:"isGameOver",get:function(){return"lost"===this.games.result||"won"===this.games.result}},{key:"isGameWon",get:function(){return"won"===this.games.result}},{key:"getRemainingAvailablePiece",get:function(){return this.remainingPieces}},{key:"getTime",get:function(){return Math.floor(this.games.time)}}]),e}(),w=function(){function e(){var t=this;Object(c.a)(this,e),this.listeners={},this.timer=0,this.touchTimer=0,this.touchThreshold=300,this.touchPoint=void 0,this.idCounter=0,this.state=void 0,this.mouseEvent=function(e){if(!t.touchPoint&&(!t.state||!t.state.events.includes("touch"))){if(t.state&&t.state.events.push(e.type),!t.state||"mousemove"!==e.type)return t.state&&"mousedown"===e.type?(t.state.leftClick=[1,3,5,7].includes(e.buttons),t.state.middleClick=[4,5,6,7].includes(e.buttons),void(t.state.rightClick=[2,3,6,7].includes(e.buttons))):void(t.state={leftClick:[1,3,5,7].includes(e.buttons),middleClick:[4,5,6,7].includes(e.buttons),rightClick:[2,3,6,7].includes(e.buttons),pos:{x:e.pageX,y:e.pageY},keys:[],events:[e.type]});t.state.pos={x:e.pageX,y:e.pageY}}},this.stopContextMenu=function(e){return e.preventDefault(),e.stopPropagation(),!1},this.touchEvent=function(e){if("touchstart"===e.type)return 0===t.touchTimer&&(t.timer=Date.now()),void(t.touchPoint={x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY});if("touchmove"!==e.type){if("touchend"===e.type&&t.touchPoint){var i=Date.now()-t.timer;t.timer=Date.now(),t.touchTimer+=i,t.state={leftClick:t.touchTimer<t.touchThreshold,middleClick:!1,rightClick:t.touchTimer>t.touchThreshold,pos:t.touchPoint,keys:t.state?t.state.keys:[],events:["touch"]},t.touchPoint=void 0,t.touchTimer=0}}else t.touchPoint=void 0},this.keydownEvent=function(e){t.state&&t.state.events.push(e.type),t.state?t.state.keys.push(e.key):t.state={leftClick:!1,middleClick:!1,rightClick:!1,pos:{x:-1,y:-1},keys:[e.key],events:[e.type]}}}return Object(h.a)(e,[{key:"start",value:function(e,t){var i=this,a=this.uniqueId();return this.listeners[a]={element:e,listeningTo:[]},t.forEach(function(e){var t=i.getFunctionPointer(e);"keydown"===e?window.addEventListener(e,t):i.listeners[a].element.addEventListener(e,t,{passive:"contextmenu"!==e}),i.listeners[a].listeningTo.push(e)}),a}},{key:"pollEvents",value:function(e){if(this.state){var t=this.listeners[e].element.getBoundingClientRect();this.state.pos.x-=t.left,this.state.pos.y-=t.top}return this.state}},{key:"flush",value:function(){this.state=void 0}},{key:"stop",value:function(e){var t=this;return void 0!==this.listeners[e]&&(this.listeners[e].listeningTo.forEach(function(i){var a=t.getFunctionPointer(i);"keydown"===i?window.removeEventListener(i,a):t.listeners[e].element.removeEventListener(i,a)}),!0)}},{key:"getFunctionPointer",value:function(e){switch(e){case"mousemove":case"mousedown":case"mouseup":return this.mouseEvent;case"contextmenu":return this.stopContextMenu;case"touchstart":case"touchmove":case"touchend":return this.touchEvent;case"keydown":return this.keydownEvent}}},{key:"uniqueId",value:function(){return this.idCounter++}}]),e}(),S=i(6),E=i(27),C=i(20),I=i(72),P=i(60),O=i(67),M=i(90),A=i.n(M),x=i(73),j=i.n(x),L=(i(40),i(10)),T=function(e){return v.a.createElement("header",{className:"header  header--game"},v.a.createElement("div",{className:"header__detail"},v.a.createElement("img",{src:A.a,alt:"Home"}),v.a.createElement("span",null,e.left,"/",e.pieces)),v.a.createElement("h3",null,v.a.createElement(L.b,{to:"/"},"BombFinder")),v.a.createElement("div",{className:"header__detail"},v.a.createElement("span",null,Object(O.a)(e.time)),v.a.createElement("img",{src:j.a,alt:"Home"})))},B=i(31),G=i.n(B),R=i(32),N=i.n(R),V=(i(39),i(91),function(e){return v.a.createElement("label",{className:"switch"},v.a.createElement("input",{checked:e.checked,onChange:e.onChange,className:"switch__input",type:"checkbox"}),v.a.createElement("span",{className:"switch__box"},v.a.createElement("span",{className:"switch__marker"})))}),_=function(e){var t=!!e.isSwitchChecked;return v.a.createElement("footer",{className:"footer footer--game"},v.a.createElement(L.b,{to:"/how-to-play"},v.a.createElement("img",{src:G.a,alt:"Info"})),v.a.createElement("div",{className:"footer__text"},v.a.createElement("span",null,"Clear"),v.a.createElement(V,{checked:t,onChange:function(t){return e.flagToggle(t.target.checked)}}),v.a.createElement("span",null,"Flag")),v.a.createElement(L.b,{to:"/settings"},v.a.createElement("img",{src:N.a,alt:"Settings"})))},z=(i(92),function(e){function t(){var e,i;Object(c.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(i=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).stopUpdates=!1,i.rafId=void 0,i.container=void 0,i.canvas=void 0,i.context2D=void 0,i.gameState=void 0,i.input=void 0,i.state={ready:!1,gameOver:!1,canVibrate:!1,canTryAgain:!1,toMainMenu:!1,totalPieces:0,remainingAvailablePiece:0,time:0},i.changeInputMode=function(e){i.gameState.setMarkInput(e),i.forceUpdate()},i.tryAgain=Object(o.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.state.ready||i.state.newGameId||!i.state.canTryAgain){e.next=11;break}return e.prev=1,e.next=4,i.gameState.reset();case 4:t=e.sent,i.setState({ready:!1,newGameId:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.warn("error "+e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])})),i.goToMainMenu=Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.state.ready){e.next=5;break}return e.next=3,i.gameState.logAndDestroy();case 3:e.sent&&i.setState({toMainMenu:!0});case 5:case"end":return e.stop()}},e)})),i.draw=function(){if(i.state.ready){var e=i.input.pollEvents(i.state.inputId);e&&(i.gameState.handleEvents(e),e.keys.length>0&&i.forceUpdate()),i.gameState.update(.0167);var t={x:i.container.scrollLeft,y:i.container.scrollTop,width:i.container.clientWidth,height:i.container.clientHeight};i.gameState.draw(i.context2D,t),(void 0===i.rafId||i.gameState.isGameOver)&&i.gameState.draw(i.context2D,t),i.input.flush(),i.gameState.isGameOver&&(i.gameState.isGameWon?i.props.onGameFinished("won"):(i.state.canVibrate&&navigator.vibrate&&navigator.vibrate(200),i.setState({remainingAvailablePiece:i.gameState.getRemainingAvailablePiece,gameOver:!0,canVibrate:!1,canTryAgain:!0}))),i.stopUpdates||(i.rafId=requestAnimationFrame(i.draw),i.state.time!==i.gameState.getTime?i.setState({remainingAvailablePiece:i.gameState.getRemainingAvailablePiece,time:i.gameState.getTime}):i.state.remainingAvailablePiece!==i.gameState.getRemainingAvailablePiece&&i.setState({remainingAvailablePiece:i.gameState.getRemainingAvailablePiece}))}},i}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e,t){t.newGameId&&e.id!==t.newGameId&&(this.setState({ready:!1,gameOver:!1,canTryAgain:!1,time:0,newGameId:void 0,inputId:void 0}),this.destroyGame(),this.createGame())}},{key:"componentDidMount",value:function(){var e=Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.createGame();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.stopUpdates=!0,this.destroyGame()}},{key:"createGame",value:function(){var e=Object(o.a)(r.a.mark(function e(){var t,i,a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.GetById(this.props.id);case 2:return t=e.sent,e.next=5,I.a.GetPreferences();case 5:if(i=e.sent,a=document.getElementById("page"),"won"!==t.result){e.next=10;break}return this.props.onGameFinished(t.result),e.abrupt("return");case 10:this.gameState=new k(t,i,a.clientWidth,a.clientHeight-120),this.input=new w,this.setState({ready:!0,totalPieces:t.totalPieces,remainingAvailablePiece:this.gameState.getRemainingAvailablePiece}),this.canvas=document.getElementById("board"),this.container=document.getElementById("board-container"),this.context2D=this.canvas.getContext("2d"),n=this.input.start(this.canvas,["mousemove","mousedown","contextmenu","touchstart","touchmove","touchend","keydown"]),this.canvas.width=this.gameState.gameBoardWidth,this.canvas.height=this.gameState.gameBoardHeight,this.container.scrollLeft=(this.gameState.gameBoardWidth-window.innerWidth)/2,this.setState({ready:!0,inputId:n,canVibrate:i.vibration}),requestAnimationFrame(this.draw);case 22:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"destroyGame",value:function(){this.state.ready&&this.state.inputId&&this.input.stop(this.state.inputId),this.rafId&&cancelAnimationFrame(this.rafId)}},{key:"render",value:function(){if(this.state.toMainMenu)return v.a.createElement(S.a,{to:"/"});if(this.state.newGameId){var e="/game/".concat(this.state.newGameId);return v.a.createElement(S.a,{to:e})}if(!this.state.ready)return v.a.createElement(C.a,null);var t={height:this.gameState.gameBoardHeight,width:this.gameState.gameBoardWidth},i="board__canvas "+this.gameState.gameBoardOverflowClasses;return v.a.createElement("div",{className:"board"},v.a.createElement(T,{time:this.gameState.getTime,left:this.state.remainingAvailablePiece,pieces:this.state.totalPieces}),v.a.createElement("div",{className:i,id:"board-container"},v.a.createElement("canvas",{id:"board",className:this.gameState.gameState,width:t.width,height:t.height}),this.state.gameOver?v.a.createElement("div",{className:"board__popup"},v.a.createElement(P.a,{className:"board__popup__item",type:"button",text:"Try Again",onClick:this.tryAgain}),v.a.createElement(P.a,{className:"board__popup__item",type:"button",text:"Main Menu",onClick:this.goToMainMenu})):null),v.a.createElement(_,{isSwitchChecked:!this.gameState.isInputModeToggle,flagToggle:this.changeInputMode}))}}]),t}(g.Component)),D=i(75);i.d(t,"default",function(){return F});var F=function(e){function t(){var e,i;Object(c.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(i=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={to404Page:!1,toWonPage:!1,redirecting:!1,ready:!1},i.gameFinished=function(e){i.setState({toWonPage:"won"===e})},i}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.DoesGameExists(this.props.match.params.id);case 2:e.sent?this.setState({to404Page:!1,ready:!0}):this.setState({to404Page:!0,ready:!0});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.toWonPage?v.a.createElement(S.a,{to:"/game/".concat(this.props.match.params.id,"/game-won")}):this.state.to404Page?v.a.createElement(D.default,null):this.state.ready?v.a.createElement(z,{id:this.props.match.params.id,onGameFinished:this.gameFinished}):null}}]),t}(g.Component)},59:function(e,t,i){},60:function(e,t,i){"use strict";var a=i(0),n=i.n(a);i(59);t.a=function(e){var t=e.type,i=e.disabled,a=e.className,s=e.text,r=e.onClick,o=i?"button disabled":"button",c=a?"".concat(a," ").concat(o):o;return r?n.a.createElement("button",{className:c,disabled:i,type:t,onClick:r},s):n.a.createElement("button",{className:c,disabled:i,type:t},s)}},61:function(e,t,i){"use strict";function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",function(){return a})},62:function(e,t,i){"use strict";i.d(t,"a",function(){return a}),i.d(t,"b",function(){return r});var a,n=i(8),s=i(9);!function(e){e[e.REPEAT=0]="REPEAT",e[e.ALTERNATE=1]="ALTERNATE",e[e.STOP=2]="STOP"}(a||(a={}));var r=function(){function e(t,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.STOP;Object(n.a)(this,e),this.playing=void 0,this.timer=0,this.target=void 0,this.step=void 0,this.loop=void 0,this.alternated=void 0,this.timer=0,this.target=t,this.step=i,this.loop=s,this.alternated=!1,this.playing=!0}return Object(s.a)(e,[{key:"update",value:function(e){!this.isComplete()&&this.playing?this.timer+=this.step:this.loop===a.REPEAT?this.timer=this.timer%this.target:this.loop===a.ALTERNATE?(this.setStep(-1*this.step),this.alternated?this.timer=this.target:this.timer=0):this.loop===a.STOP&&(this.timer=this.target,this.stop())}},{key:"stop",value:function(){this.playing=!1}},{key:"play",value:function(){this.playing=!0}},{key:"getValue",value:function(){return this.timer}},{key:"setTarget",value:function(e){this.target=e}},{key:"setStep",value:function(e){this.alternated=e<0,this.step=e}},{key:"isComplete",value:function(){return this.alternated?this.timer<=0:this.timer>=this.target}}]),e}()},63:function(e,t,i){"use strict";var a;i.d(t,"b",function(){return a}),i.d(t,"g",function(){return s}),i.d(t,"e",function(){return r}),i.d(t,"f",function(){return o}),i.d(t,"a",function(){return n}),i.d(t,"c",function(){return c}),i.d(t,"d",function(){return h}),function(e){e[e.INVISIBLE=0]="INVISIBLE",e[e.VISIBLE=1]="VISIBLE",e[e.VISIBLY_SATISFIED=2]="VISIBLY_SATISFIED",e[e.MARKED=3]="MARKED"}(a||(a={}));var n,s=function(e){return e===a.VISIBLE||e===a.VISIBLY_SATISFIED},r=function(e){return e===a.MARKED||e===a.INVISIBLE},o=function(e){return e.visibility===a.MARKED};!function(e){e[e.BOMB=0]="BOMB",e[e.CLEAN=1]="CLEAN"}(n||(n={}));var c=function(e){switch(e){case 0:return 1;case 1:return 2;case 2:return 3;case 3:return 4;case 4:return 5;case 5:return 6;case 6:return 7;case 7:case 8:return 8;default:return null}},h=function(e){return null===e||void 0===e}},64:function(e,t,i){"use strict";function a(e,t){return Math.floor(Math.random()*t)+e}i.d(t,"a",function(){return a})},66:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var a=i(8),n=i(9),s=i(62),r=i(63),o=i(64),c=function(){function e(t){Object(a.a)(this,e),this.invisiblePieceCanvas=void 0,this.invisibleMarkedPieceCanvas=void 0,this.staticPieceCanvas=[],this.pieceAnimations=[],this.pieceLength=void 0,this.gapSize=void 0,this.simpleRender=void 0,this.exampleCellValue=Object(o.a)(0,8),this.pieceLength=t.defaultCellSize,this.gapSize=t.gridGapSize,this.simpleRender=t.simpleRender,this.setSpinningCubes(t.spinningCubes),this.invisiblePieceCanvas=document.createElement("canvas"),this.invisiblePieceCanvas.height=this.pieceLength+2,this.invisiblePieceCanvas.width=this.pieceLength+2,this.drawInvisiblePiece(this.invisiblePieceCanvas.getContext("2d"),1,1),this.invisibleMarkedPieceCanvas=document.createElement("canvas"),this.invisibleMarkedPieceCanvas.height=this.pieceLength+2,this.invisibleMarkedPieceCanvas.width=this.pieceLength+2,this.drawInvisiblePiece(this.invisibleMarkedPieceCanvas.getContext("2d"),1,1,"#3396ff");for(var i=0;i<18;i++){this.staticPieceCanvas[i]=document.createElement("canvas"),this.staticPieceCanvas[i].width=this.pieceLength+2,this.staticPieceCanvas[i].height=this.pieceLength+2;var n=this.staticPieceCanvas[i].getContext("2d");if(i<8)this.drawVisibleCell(n,1,1.5,i+1);else if(i<16){var s=i%8+1;this.drawVisibleCell(n,1,1.5,s,"#3396ff")}else i<17?this.drawVisibleCell(n,1,1.5,0):this.drawVisibleCell(n,1,1.5,void 0)}}return Object(n.a)(e,[{key:"setCellSize",value:function(e){this.pieceLength=e,this.invisiblePieceCanvas.height=e,this.invisiblePieceCanvas.width=e,this.invisibleMarkedPieceCanvas.height=e,this.invisibleMarkedPieceCanvas.width=e;for(var t=0;t<18;t++){this.staticPieceCanvas[t].width=e,this.staticPieceCanvas[t].height=e;var i=this.staticPieceCanvas[t].getContext("2d");if(t<8)this.drawVisibleCell(i,0,0,t+1);else if(t<16){var a=t%8+1;this.drawVisibleCell(i,0,0,a,"#3396ff")}else t<17?this.drawVisibleCell(i,0,0,0):this.drawVisibleCell(i,0,0,void 0)}}},{key:"setGapSize",value:function(e){this.gapSize=e}},{key:"setSpinningCubes",value:function(e){this.pieceAnimations=[];for(var t=e+1;t>=1;t--)this.pieceAnimations.push(new s.b(90*t,Math.pow(t+1,.035*t)-1,s.a.ALTERNATE))}},{key:"setSimpleRender",value:function(e){this.simpleRender=e}},{key:"update",value:function(e){if(!this.simpleRender){for(var t=0;t<this.pieceAnimations.length;t++)this.pieceAnimations[t].update(e);var i=this.invisiblePieceCanvas.getContext("2d"),a=this.invisibleMarkedPieceCanvas.getContext("2d");i.clearRect(0,0,this.pieceLength,this.pieceLength),a.clearRect(0,0,this.pieceLength,this.pieceLength),this.drawInvisiblePiece(i,1,1),this.drawInvisiblePiece(a,1,1,"#3396ff")}}},{key:"drawPlaceHolder",value:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.b.INVISIBLE;switch(e.save(),a){case r.b.INVISIBLE:this.drawInvisiblePiece(e,t,i);break;case r.b.MARKED:this.drawInvisiblePiece(e,t,i,"#3396ff");break;case r.b.VISIBLE:this.drawVisibleCell(e,t,i,this.exampleCellValue);break;case r.b.VISIBLY_SATISFIED:this.drawVisibleCell(e,t,i,this.exampleCellValue,"#3396ff")}e.restore()}},{key:"drawPiece",value:function(e,t,i,a){if(t.visibility===r.b.INVISIBLE)e.drawImage(this.invisiblePieceCanvas,i,a),t.hover&&this.drawHover(e,i+1,a+1);else if(t.visibility===r.b.MARKED)e.drawImage(this.invisibleMarkedPieceCanvas,i,a);else{var n=this.getIndexByCell(t);e.drawImage(this.staticPieceCanvas[n],i,a)}}},{key:"getIndexByCell",value:function(e){return Object(r.d)(e.value)?17:0===e.value?16:e.visibility===r.b.VISIBLY_SATISFIED?e.value-1+8:e.value-1}},{key:"drawInvisiblePiece",value:function(e,t,i,a){if(e.save(),e.beginPath(),e.strokeStyle=a||"#FFF",this.drawRectangle(e,t,i,this.pieceLength/8,this.pieceLength),e.lineWidth=2,e.stroke(),e.closePath(),e.restore(),!this.simpleRender){e.save();for(var n=this.pieceLength,s=0,r=1;r<this.pieceAnimations.length;r++){var o=r%2===0?1:-1;this.drawRotatingSquare(e,s+t,s+i,n,r,o,a),s+=n/4/2,n=n/4*3}e.restore()}}},{key:"drawRotatingSquare",value:function(e,t,i,a,n,s,r){var o=a/8,c=a/2+2*o,h=t+a/4-o,l=i+a/4-o;e.save(),e.beginPath(),e.translate(h+c/2,l+c/2),e.rotate(this.pieceAnimations[n].getValue()*Math.PI/180),e.translate(-1*(h+c/2),-1*(l+c/2)),this.drawRectangle(e,h,l,o,c),e.lineWidth=2,e.strokeStyle=r||"gray",e.closePath(),e.stroke(),e.restore()}},{key:"drawRectangle",value:function(e,t,i,a,n){e.moveTo(t+a,i),e.lineTo(t+n-a,i),e.quadraticCurveTo(t+n,i,t+n,i+a),e.lineTo(t+n,i+n-a),e.quadraticCurveTo(t+n,i+n,t+n-a,i+n),e.lineTo(t+a,i+n),e.quadraticCurveTo(t,i+n,t,i+n-a),e.lineTo(t,i+a),e.quadraticCurveTo(t,i,t+a,i)}},{key:"drawHover",value:function(e,t,i){e.save();for(var a=1,n=1;n<=this.gapSize/2;n++)e.beginPath(),e.strokeStyle="rgba(255,255,255, ".concat(a,")"),this.drawRectangle(e,t-n,i-n,this.pieceLength/8,this.pieceLength+2*n),n+1>=this.gapSize/2?e.lineWidth=1:e.lineWidth=2,a-=.1,e.stroke(),e.closePath();e.restore()}},{key:"drawVisibleCell",value:function(e,t,i,a,n){e.save(),e.beginPath();var s=this.pieceLength;if(Object(r.d)(a)){e.save(),e.beginPath(),e.arc(t+s/2,i+s/2,s/2,0,2*Math.PI),e.strokeStyle="#690721",e.lineWidth=4,e.stroke(),e.closePath(),e.restore(),e.save(),e.beginPath(),s-=6,e.arc(t+3+s/2,i+3+s/2,s/2,0,2*Math.PI),e.strokeStyle="#f00f4b",e.lineWidth=3;var o=t+s/2,c=i+s/2,h=e.createRadialGradient(o,c,this.pieceLength/6,o,c,this.pieceLength/2);h.addColorStop(0,"#333"),h.addColorStop(1,"#690721"),e.fillStyle=h,e.fill(),e.stroke(),e.closePath(),e.restore()}else if(0===a)this.drawRectangle(e,t,i,this.pieceLength/8,this.pieceLength),e.lineWidth=3,e.strokeStyle="gray";else{n?(e.fillStyle=n,e.strokeStyle=n):(e.fillStyle="#FFFFFF",e.strokeStyle="#FFFFFF"),e.font="normal ".concat(this.pieceLength,"px sans-serif");var l=this.pieceLength/2+2,u=i+this.pieceLength/2+l,d=t+this.pieceLength/2;e.textAlign="center",e.textBaseline="bottom",e.arc(t+s/2,i+s/2,s/2,0,2*Math.PI),e.lineWidth=2,e.fillText(String(a),d,u)}e.closePath(),e.stroke(),e.restore()}}]),e}()},67:function(e,t,i){"use strict";function a(e){e=Math.floor(e);var t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),a=e-3600*t-60*i,n="";return t>0&&(n+=t<10?"0".concat(t,":"):"".concat(t,":")),n+=i<10?"0".concat(i,":"):"".concat(i,":"),n+=a<10?"0".concat(a):"".concat(a)}i.d(t,"a",function(){return a})},68:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i(61);function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){Object(a.a)(e,t,i[t])})}return e}},72:function(e,t,i){"use strict";i.d(t,"a",function(){return M});var a,n,s,r,o,c,h,l,u,d,g,v,m,f,p,b,y,k=i(1),w=i.n(k),S=i(3),E=i(4),C=i(8),I=i(9),P=i(5),O=(i(26),i(2)),M=(a=Object(O.c)("settings"),n=Object(O.a)("settings",!0),s=Object(O.a)("settings"),r=Object(O.a)("settings"),o=Object(O.a)("settings"),c=Object(O.a)("settings"),h=Object(O.a)("settings"),l=Object(O.a)("settings"),a((d=function(){function e(){Object(C.a)(this,e),this.tableName="settings",Object(E.a)(this,"id",g,this),Object(E.a)(this,"defaultCellSize",v,this),Object(E.a)(this,"gridGapSize",m,this),Object(E.a)(this,"spinningCubes",f,this),Object(E.a)(this,"simpleRender",p,this),Object(E.a)(this,"vibration",b,this),Object(E.a)(this,"timestamp",y,this)}return Object(I.a)(e,null,[{key:"GetPreferences",value:function(){var t=Object(S.a)(w.a.mark(function t(){var i,a;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=new e,t.next=3,O.b.getById(i,i.id);case 3:if(void 0!==(a=t.sent)){t.next=8;break}return t.abrupt("return",i);case 8:return t.abrupt("return",a);case 9:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"Save",value:function(){var t=Object(S.a)(w.a.mark(function t(i){var a;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i.timestamp=new Date,a=Object.assign(new e,i),t.next=4,O.b.save(a);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}]),e}(),g=Object(P.a)(d.prototype,"id",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"preferences"}}),v=Object(P.a)(d.prototype,"defaultCellSize",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 35}}),m=Object(P.a)(d.prototype,"gridGapSize",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8.5}}),f=Object(P.a)(d.prototype,"spinningCubes",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 7}}),p=Object(P.a)(d.prototype,"simpleRender",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=Object(P.a)(d.prototype,"vibration",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=Object(P.a)(d.prototype,"timestamp",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Date}}),u=d))||u)},73:function(e,t,i){e.exports=i.p+"static/media/hourglass.63a5448b.svg"},74:function(e,t,i){},75:function(e,t,i){"use strict";i.r(t);var a=i(0),n=i.n(a),s=(i(59),i(74),i(10));t.default=function(){return n.a.createElement("div",{className:"page-not-found"},n.a.createElement("h1",null,"404"),n.a.createElement("div",{className:"page-not-found__message"},"Looks like you've lost your way"),n.a.createElement(s.b,{to:"/",className:"link-button page-not-found__btn"},"Go Home"))}},90:function(e,t,i){e.exports=i.p+"static/media/piece.e03fada0.svg"},91:function(e,t,i){},92:function(e,t,i){}}]);
//# sourceMappingURL=3.fe9c0cd6.chunk.js.map