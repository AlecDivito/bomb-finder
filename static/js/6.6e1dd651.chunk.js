(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{59:function(e,t,i){},60:function(e,t,i){"use strict";var a=i(0),s=i.n(a);i(59);t.a=function(e){var t=e.type,i=e.disabled,a=e.className,n=e.text,r=e.onClick,l=i?"button disabled":"button",c=a?"".concat(a," ").concat(l):l;return r?s.a.createElement("button",{className:c,disabled:i,type:t,onClick:r},n):s.a.createElement("button",{className:c,disabled:i,type:t},n)}},62:function(e,t,i){"use strict";var a;i.d(t,"b",function(){return a}),i.d(t,"h",function(){return n}),i.d(t,"f",function(){return r}),i.d(t,"g",function(){return l}),i.d(t,"a",function(){return s}),i.d(t,"d",function(){return c}),i.d(t,"c",function(){return h}),i.d(t,"e",function(){return o}),function(e){e[e.INVISIBLE=0]="INVISIBLE",e[e.VISIBLE=1]="VISIBLE",e[e.VISIBLY_SATISFIED=2]="VISIBLY_SATISFIED",e[e.MARKED=3]="MARKED"}(a||(a={}));var s,n=function(e){return e===a.VISIBLE||e===a.VISIBLY_SATISFIED},r=function(e){return e===a.MARKED||e===a.INVISIBLE},l=function(e){return e.visibility===a.MARKED};!function(e){e[e.BOMB=0]="BOMB",e[e.CLEAN=1]="CLEAN"}(s||(s={}));var c=function(e){switch(e){case 0:return 1;case 1:return 2;case 2:return 3;case 3:return 4;case 4:return 5;case 5:return 6;case 6:return 7;case 7:case 8:return 8;default:return null}},h=function(e){switch(e){case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4;case 6:return 5;case 7:return 6;case 8:return 7;case 0:return 0;default:return null}},o=function(e){return null===e||void 0===e}},63:function(e,t,i){"use strict";function a(e,t){return Math.floor(Math.random()*t)+e}i.d(t,"a",function(){return a})},65:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var a=i(9),s=i(10),n=i(62),r=i(63),l=function(){function e(t){Object(a.a)(this,e),this.RECTANGLE_REDIS_DEGREE=6,this.LINE_WIDTH_DEGREE=20,this.ROTATING_LINE_WIDTH_DEGREE=60,this.PIECE_MARKED_COLOR="#3396ff",this.invisiblePieceCanvas=void 0,this.invisibleMarkedPieceCanvas=void 0,this.staticPieceCanvas=[],this.pieceAnimations=[],this.lineWidth=void 0,this.pieceLength=void 0,this.gapSize=void 0,this.simpleRender=void 0,this.exampleCellValue=Object(r.a)(0,8),this.reverseTiming=!1,this.lineWidth=t.defaultCellSize/this.LINE_WIDTH_DEGREE,this.pieceLength=t.defaultCellSize-2*this.lineWidth,this.gapSize=t.gridGapSize,this.simpleRender=t.simpleRender,this.setSpinningCubes(t.spinningCubes),this.invisiblePieceCanvas=document.createElement("canvas"),this.invisiblePieceCanvas.height=t.defaultCellSize,this.invisiblePieceCanvas.width=t.defaultCellSize,this.drawInvisiblePiece(this.invisiblePieceCanvas.getContext("2d"),this.lineWidth,this.lineWidth),this.invisibleMarkedPieceCanvas=document.createElement("canvas"),this.invisibleMarkedPieceCanvas.height=t.defaultCellSize,this.invisibleMarkedPieceCanvas.width=t.defaultCellSize,this.drawInvisiblePiece(this.invisibleMarkedPieceCanvas.getContext("2d"),this.lineWidth,this.lineWidth,this.PIECE_MARKED_COLOR);for(var i=0;i<18;i++){this.staticPieceCanvas[i]=document.createElement("canvas"),this.staticPieceCanvas[i].width=t.defaultCellSize,this.staticPieceCanvas[i].height=t.defaultCellSize;var s=this.staticPieceCanvas[i].getContext("2d");if(i<8)this.drawVisibleCell(s,this.lineWidth,this.lineWidth,i+1);else if(i<16){var n=i%8+1;this.drawVisibleCell(s,this.lineWidth,this.lineWidth,n,this.PIECE_MARKED_COLOR)}else i<17?this.drawVisibleCell(s,this.lineWidth,this.lineWidth,0):this.drawVisibleCell(s,this.lineWidth,this.lineWidth,void 0)}}return Object(s.a)(e,[{key:"setCellSize",value:function(e){this.lineWidth=e/this.LINE_WIDTH_DEGREE,this.pieceLength=e-2*this.lineWidth,this.invisiblePieceCanvas.height=e,this.invisiblePieceCanvas.width=e,this.invisibleMarkedPieceCanvas.height=e,this.invisibleMarkedPieceCanvas.width=e;for(var t=0;t<18;t++){this.staticPieceCanvas[t].width=e,this.staticPieceCanvas[t].height=e;var i=this.staticPieceCanvas[t].getContext("2d");if(t<8)this.drawVisibleCell(i,0,0,t+1);else if(t<16){var a=t%8+1;this.drawVisibleCell(i,0,0,a,this.PIECE_MARKED_COLOR)}else t<17?this.drawVisibleCell(i,0,0,0):this.drawVisibleCell(i,0,0,void 0)}}},{key:"setGapSize",value:function(e){this.gapSize=e}},{key:"setSpinningCubes",value:function(e){this.pieceAnimations=[];for(var t=e+1;t>=1;t--)this.pieceAnimations.push(0)}},{key:"setSimpleRender",value:function(e){this.simpleRender=e}},{key:"update",value:function(e){if(!this.simpleRender&&0!==this.pieceAnimations.length){for(var t=[],i=0;i<this.pieceAnimations.length;i++){var a=i;this.reverseTiming&&(a=this.pieceAnimations.length-i);var s=this.pieceAnimations[a],n=this.pieceAnimations[a]+e*a*1;this.reverseTiming?Math.sin(n)<Math.sin(s)?(this.pieceAnimations[a]=n,t.push(!1)):t.push(!0):Math.sin(n)>Math.sin(s)?(this.pieceAnimations[a]=n,t.push(!0)):t.push(!1)}t.every(function(e){return e===t[0]})&&(this.reverseTiming=!this.reverseTiming);var r=this.invisiblePieceCanvas.getContext("2d"),l=this.invisibleMarkedPieceCanvas.getContext("2d"),c=this.pieceLength+2*this.lineWidth;r.clearRect(0,0,c,c),l.clearRect(0,0,c,c),this.drawInvisiblePiece(r,this.lineWidth,this.lineWidth),this.drawInvisiblePiece(l,this.lineWidth,this.lineWidth,this.PIECE_MARKED_COLOR)}}},{key:"drawPlaceHolder",value:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.b.INVISIBLE;switch(e.save(),a){case n.b.INVISIBLE:this.drawInvisiblePiece(e,t,i);break;case n.b.MARKED:this.drawInvisiblePiece(e,t,i,this.PIECE_MARKED_COLOR);break;case n.b.VISIBLE:this.drawVisibleCell(e,t,i,this.exampleCellValue);break;case n.b.VISIBLY_SATISFIED:this.drawVisibleCell(e,t,i,this.exampleCellValue,this.PIECE_MARKED_COLOR)}e.restore()}},{key:"drawPiece",value:function(e,t,i,a){if(t.visibility===n.b.INVISIBLE){if(e.drawImage(this.invisiblePieceCanvas,i,a),t.hover){var s=this.lineWidth/2;this.drawHover(e,i+s,a+s)}}else if(t.visibility===n.b.MARKED)e.drawImage(this.invisibleMarkedPieceCanvas,i,a);else{var r=this.getIndexByCell(t);e.drawImage(this.staticPieceCanvas[r],i,a)}}},{key:"getIndexByCell",value:function(e){return Object(n.e)(e.value)?17:0===e.value?16:e.visibility===n.b.VISIBLY_SATISFIED?e.value-1+8:e.value-1}},{key:"drawInvisiblePiece",value:function(e,t,i,a){if(!this.simpleRender){e.save();for(var s=.9*this.pieceLength,n=.05*this.pieceLength,r=1;r<this.pieceAnimations.length+1;r++){var l=Math.sin(this.pieceAnimations[r]),c=this.pieceAnimations.length-1;s+=l*Math.pow(c,.25),n+=l*-Math.pow(c,.25)/2,this.drawRotatingSquare(e,n+t,i+n,s,r,l,a),n+=s/4/2,s=s/4*3}e.restore()}e.save(),e.beginPath(),e.strokeStyle=a||"#FFF",this.drawSquare(e,t,i,this.pieceLength/this.RECTANGLE_REDIS_DEGREE,this.pieceLength),e.lineWidth=this.lineWidth,e.stroke(),e.closePath(),e.restore()}},{key:"drawRotatingSquare",value:function(e,t,i,a,s,n,r){var l=a/this.RECTANGLE_REDIS_DEGREE,c=a/2+2*l,h=t+a/4-l,o=i+a/4-l;e.save(),e.beginPath(),e.translate(h+ +c/2,o+c/2),e.rotate(n),e.translate(-1*(h+c/2),-1*(o+c/2)),this.drawSquare(e,h,o,l,c);var d=this.pieceLength/this.ROTATING_LINE_WIDTH_DEGREE;d<1&&(d=1),e.lineWidth=d,e.strokeStyle=r||"rgba(255, 255, 255, 0.4)",e.closePath(),e.stroke(),e.restore()}},{key:"drawSquare",value:function(e,t,i,a,s){e.moveTo(t+a,i),e.lineTo(t+s-a,i),e.quadraticCurveTo(t+s,i,t+s,i+a),e.lineTo(t+s,i+s-a),e.quadraticCurveTo(t+s,i+s,t+s-a,i+s),e.lineTo(t+a,i+s),e.quadraticCurveTo(t,i+s,t,i+s-a),e.lineTo(t,i+a),e.quadraticCurveTo(t,i,t+a,i)}},{key:"drawHover",value:function(e,t,i){e.save();var a=this.gapSize/2,s=1,n=1/a;t+=(1+this.lineWidth)/2,i+=(1+this.lineWidth)/2;for(var r=1;r<=a;r++)e.beginPath(),e.strokeStyle="rgba(255,255,255, ".concat(s,")"),this.drawSquare(e,t-r,i-r,this.pieceLength/this.RECTANGLE_REDIS_DEGREE,this.pieceLength+2*r),r+1>=this.gapSize/2?e.lineWidth=1:e.lineWidth=2,s-=n,e.stroke(),e.closePath();e.restore()}},{key:"drawVisibleCell",value:function(e,t,i,a,s){e.save(),e.beginPath();var r=this.pieceLength;if(Object(n.e)(a)){e.save(),e.beginPath(),e.arc(t+r/2,i+r/2,r/2,0,2*Math.PI),e.strokeStyle="#690721",e.lineWidth=4,e.stroke(),e.closePath(),e.restore(),e.save(),e.beginPath(),r-=6,e.arc(t+3+r/2,i+3+r/2,r/2,0,2*Math.PI),e.strokeStyle="#f00f4b",e.lineWidth=3;var l=t+r/2,c=i+r/2,h=e.createRadialGradient(l,c,this.pieceLength/6,l,c,this.pieceLength/2);h.addColorStop(0,"#333"),h.addColorStop(1,"#690721"),e.fillStyle=h,e.fill(),e.stroke(),e.closePath(),e.restore()}else if(0===a)this.drawSquare(e,t,i,this.pieceLength/this.RECTANGLE_REDIS_DEGREE,this.pieceLength),e.lineWidth=this.lineWidth,e.strokeStyle="gray";else{s?(e.fillStyle=s,e.strokeStyle=s):(e.fillStyle="#FFFFFF",e.strokeStyle="#FFFFFF"),e.font="normal ".concat(this.pieceLength,"px sans-serif");var o=this.pieceLength/2+1.5*this.lineWidth,d=i+this.pieceLength/2+o,u=t+this.pieceLength/2;e.textAlign="center",e.textBaseline="bottom",e.arc(t+r/2,i+r/2,r/2,0,2*Math.PI),e.lineWidth=this.lineWidth,e.fillText(String(a),u,d)}e.closePath(),e.stroke(),e.restore()}}]),e}()},66:function(e,t,i){"use strict";function a(e){e=Math.floor(e);var t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),a=e-3600*t-60*i,s="";return t>0&&(s+=t<10?"0".concat(t,":"):"".concat(t,":")),s+=i<10?"0".concat(i,":"):"".concat(i,":"),s+=a<10?"0".concat(a):"".concat(a)}i.d(t,"a",function(){return a})},72:function(e,t,i){e.exports=i.p+"static/media/hourglass.63a5448b.svg"},92:function(e,t,i){},99:function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return S});var a=i(1),s=i.n(a),n=i(3),r=i(9),l=i(10),c=i(16),h=i(15),o=i(17),d=i(0),u=i.n(d),m=i(6),v=i(8),f=i(27),E=i(20),g=(i(92),i(59),i(72)),p=i.n(g),b=i(65),C=i(60),I=i(66),w=i(22),S=function(e){function t(e){var i;return Object(r.a)(this,t),(i=Object(c.a)(this,Object(h.a)(t).call(this,e))).keepUpdating=!0,i.canvas=void 0,i.context2D=void 0,i.game=void 0,i.stats=void 0,i.pieceRenderer=void 0,i.playAgain=Object(n.a)(s.a.mark(function e(){var t,a,n,r,l,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.game,a=t.difficulty,n=t.width,r=t.height,l=t.bombs,e.next=3,f.a.Create(a,n,r,l);case 3:c=e.sent,i.setState({gameId:c.id});case 5:case"end":return e.stop()}},e)})),i.draw=function(e){i.pieceRenderer.update(.0167),i.context2D.fillStyle="#333",i.context2D.fillRect(0,0,i.state.dimensions,i.state.dimensions),i.pieceRenderer.drawPlaceHolder(i.context2D,2.5,2.5),i.keepUpdating&&i.setState({rafId:requestAnimationFrame(i.draw)})},i.state={loading:!0,dimensions:0,winningText:""},i}return Object(o.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(n.a)(s.a.mark(function e(){var t,i,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.GetById(this.props.match.params.id);case 2:return this.game=e.sent,e.next=5,w.a.GetStats(this.game.difficulty);case 5:this.stats=e.sent,t={defaultCellSize:120,gridGapSize:5,spinningCubes:7,simpleRender:!1,firstMoveHandicap:!0,vibrantColors:!1,vibration:!1,timestamp:new Date},i=!1,a="You win!",Math.floor(this.game.time)>=this.stats.worstTime&&(a="New Low Score!",0===Math.floor(this.game.time)?(i=!0,this.stats.worstTime=1):this.stats.worstTime=Math.floor(this.game.time)),(Math.floor(this.game.time)<=this.stats.bestTime||0===this.stats.bestTime)&&(a="New High Score!",0===Math.floor(this.game.time)?(i=!0,this.stats.bestTime=1):this.stats.bestTime=Math.floor(this.game.time)),i&&(this.game.time=1),this.setState({loading:!1,winningText:a,moves:this.game.totalMoves,time:this.game.time,difficulty:this.game.difficulty,dimensions:t.defaultCellSize+5}),this.canvas=document.getElementById("piece-canvas"),this.context2D=this.canvas.getContext("2d"),this.pieceRenderer=new b.a(t),requestAnimationFrame(this.draw);case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.game&&this.game.logAndDestroy(),this.state.rafId&&cancelAnimationFrame(this.state.rafId),this.keepUpdating=!1}},{key:"render",value:function(){if(this.state.loading)return u.a.createElement(E.a,null);if(this.state.gameId)return u.a.createElement(m.a,{to:"/game/".concat(this.state.gameId)});var e=this.game,t=e.difficulty,i=e.bombs,a=e.width,s=e.height;return u.a.createElement("div",{className:"game-won"},u.a.createElement("canvas",{id:"piece-canvas",width:this.state.dimensions,height:this.state.dimensions},"This Device doesn't support the canvas element!"),u.a.createElement("div",{className:"game-won--statement"},this.state.winningText),u.a.createElement("div",{className:"game-won--statement"},t," (",a,"x",s,":",i,")"),u.a.createElement("div",{className:"divider"}),u.a.createElement("ul",{className:"game-won__stats"},u.a.createElement("li",{className:"game-won__stats__item"},u.a.createElement("span",null,"Moves"),u.a.createElement("br",null),u.a.createElement("span",null,this.state.moves)),u.a.createElement("li",{className:"game-won__stats__item"},u.a.createElement("span",null,"Score"),u.a.createElement("br",null),u.a.createElement("span",null,Object(I.a)(this.state.time))),u.a.createElement("li",{className:"game-won__stats__item--icon"},u.a.createElement("img",{src:p.a,alt:"watch"})),u.a.createElement("li",{className:"game-won__stats__item"},u.a.createElement("span",null,"Best"),u.a.createElement("br",null),u.a.createElement("span",null,Object(I.a)(this.stats.bestTime))),u.a.createElement("li",{className:"game-won__stats__item"},u.a.createElement("span",null,"Worst"),u.a.createElement("br",null),u.a.createElement("span",null,Object(I.a)(this.stats.worstTime)))),u.a.createElement("div",{className:"divider"}),u.a.createElement("div",{className:"game-won__options"},u.a.createElement(C.a,{className:"game-won__options__item link-button",type:"button",text:"Play Again",onClick:this.playAgain}),u.a.createElement(v.b,{className:"game-won__options__item link-button",to:"/"},"Main Menu")))}}]),t}(d.Component)}}]);
//# sourceMappingURL=6.6e1dd651.chunk.js.map