(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{103:function(e,t,i){"use strict";i.r(t);var a=i(1),n=i.n(a),s=i(3),r=i(66),l=i(8),c=i(9),h=i(16),o=i(15),u=i(17),d=i(0),v=i.n(d),p=i(70),b=i(68),f=(i(86),i(67),function(e){var t=e.text,i=e.name,a=e.value,n=e.max,s=e.min,r=e.onChange,l=n||100,c=s||0;return v.a.createElement("div",{className:"form-input slider"},v.a.createElement("label",{htmlFor:i},t," (",a,")"),v.a.createElement("input",{type:"range",id:i,name:i,value:a,max:l,min:c,onChange:r}))}),g=i(20),m=i(60),C=i(65);i(87);i.d(t,"default",function(){return S});var S=function(e){function t(){var e,i;Object(l.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(i=Object(h.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(n)))).keepUpdating=!0,i.lastFrame=0,i.rafId=0,i.canvas=void 0,i.ctx=void 0,i.pieceRenderer=void 0,i.handleChange=function(e){var t,a=e.target;"checkbox"===a.type?t=a.checked:(t=parseInt(a.value,10),isNaN(t)&&(t=0));var n=a.name;switch(n){case"defaultCellSize":i.pieceRenderer.setCellSize(t);break;case"gridGapSize":i.pieceRenderer.setGapSize(t);break;case"spinningCubes":i.pieceRenderer.setSpinningCubes(t);break;case"simpleRender":i.pieceRenderer.setSimpleRender(t)}i.setState(Object(r.a)({},n,t))},i.handleSubmit=function(e){e.preventDefault(),i.setState({timestamp:new Date}),p.a.Save(i.state)},i.draw=function(e){var t=e-i.lastFrame,a=2*i.state.defaultCellSize+i.state.gridGapSize;i.ctx.fillStyle="#333",i.ctx.fillRect(0,0,a,a),i.pieceRenderer.update(t),[0,0,1,1].forEach(function(e,t){var a=t%2,n=1+a*i.state.defaultCellSize+i.state.gridGapSize*a,s=1+e*i.state.defaultCellSize+i.state.gridGapSize*e;i.pieceRenderer.drawPlaceHolder(i.ctx,n,s,t)}),i.keepUpdating&&(i.rafId=requestAnimationFrame(i.draw),i.lastFrame=e)},i}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(n.a.mark(function e(){var t;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.GetPreferences();case 2:t=e.sent,this.setState(t),this.canvas=document.getElementById("preview"),this.ctx=this.canvas.getContext("2d"),this.pieceRenderer=new C.a(t),requestAnimationFrame(this.draw);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.keepUpdating=!1,cancelAnimationFrame(this.rafId)}},{key:"render",value:function(){if(!this.state)return v.a.createElement(g.a,null);var e=2*this.state.defaultCellSize+this.state.gridGapSize+2;return v.a.createElement("div",{className:"settings"},v.a.createElement("h1",null,"Settings"),v.a.createElement("form",{onSubmit:this.handleSubmit},v.a.createElement(f,{text:"Piece Length",name:"defaultCellSize",max:125,min:25,value:this.state.defaultCellSize,onChange:this.handleChange}),v.a.createElement(f,{text:"Piece Gap",name:"gridGapSize",max:50,min:5,value:this.state.gridGapSize,onChange:this.handleChange}),v.a.createElement(f,{text:"Spinning Cubes",name:"spinningCubes",max:10,min:0,value:this.state.spinningCubes,onChange:this.handleChange}),v.a.createElement(b.a,{text:"Simple Render",name:"simpleRender",checked:this.state.simpleRender,onChange:this.handleChange}),v.a.createElement("h3",null,"Grid Preview"),v.a.createElement("div",{className:"form-input center"},v.a.createElement("canvas",{id:"preview",width:e,height:e})),v.a.createElement(b.a,{text:"Viberations",name:"vibration",checked:this.state.vibration,onChange:this.handleChange}),v.a.createElement(m.a,{type:"submit",text:"Save Changes"})),v.a.createElement("p",null,v.a.createElement("small",null,v.a.createElement("strong",null,"Last saved: "),v.a.createElement("time",null,this.state.timestamp.toLocaleString()))))}}]),t}(d.Component)},59:function(e,t,i){},60:function(e,t,i){"use strict";var a=i(0),n=i.n(a);i(59);t.a=function(e){var t=e.type,i=e.disabled,a=e.className,s=e.text,r=e.onClick,l=i?"button disabled":"button",c=a?"".concat(a," ").concat(l):l;return r?n.a.createElement("button",{className:c,disabled:i,type:t,onClick:r},s):n.a.createElement("button",{className:c,disabled:i,type:t},s)}},61:function(e,t,i){"use strict";i.d(t,"a",function(){return a}),i.d(t,"b",function(){return r});var a,n=i(8),s=i(9);!function(e){e[e.REPEAT=0]="REPEAT",e[e.ALTERNATE=1]="ALTERNATE",e[e.STOP=2]="STOP"}(a||(a={}));var r=function(){function e(t,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.STOP;Object(n.a)(this,e),this.playing=void 0,this.timer=0,this.target=void 0,this.step=void 0,this.loop=void 0,this.alternated=void 0,this.timer=0,this.target=t,this.step=i,this.loop=s,this.alternated=!1,this.playing=!0}return Object(s.a)(e,[{key:"update",value:function(e){!this.isComplete()&&this.playing?this.timer+=this.step:this.loop===a.REPEAT?this.timer=this.timer%this.target:this.loop===a.ALTERNATE?(this.setStep(-1*this.step),this.alternated?this.timer=this.target:this.timer=0):this.loop===a.STOP&&(this.timer=this.target,this.stop())}},{key:"stop",value:function(){this.playing=!1}},{key:"play",value:function(){this.playing=!0}},{key:"getValue",value:function(){return this.timer}},{key:"setTarget",value:function(e){this.target=e}},{key:"setStep",value:function(e){this.alternated=e<0,this.step=e}},{key:"isComplete",value:function(){return this.alternated?this.timer<=0:this.timer>=this.target}}]),e}()},62:function(e,t,i){"use strict";var a;i.d(t,"b",function(){return a}),i.d(t,"f",function(){return s}),i.d(t,"d",function(){return r}),i.d(t,"e",function(){return l}),i.d(t,"a",function(){return n}),i.d(t,"c",function(){return c}),function(e){e[e.INVISIBLE=0]="INVISIBLE",e[e.VISIBLE=1]="VISIBLE",e[e.VISIBLY_SATISFIED=2]="VISIBLY_SATISFIED",e[e.MARKED=3]="MARKED"}(a||(a={}));var n,s=function(e){return e===a.VISIBLE||e===a.VISIBLY_SATISFIED},r=function(e){return e===a.MARKED||e===a.INVISIBLE},l=function(e){return e.visibility===a.MARKED};!function(e){e[e.BOMB=0]="BOMB",e[e.CLEAN=1]="CLEAN"}(n||(n={}));var c=function(e){return null===e||void 0===e}},65:function(e,t,i){"use strict";var a=i(8),n=i(9),s=i(61),r=i(62);i.d(t,"a",function(){return l});var l=function(){function e(t){var i,n;Object(a.a)(this,e),this.invisiblePieceCanvas=void 0,this.invisibleMarkedPieceCanvas=void 0,this.staticPieceCanvas=[],this.pieceAnimations=[],this.pieceLength=void 0,this.gapSize=void 0,this.simpleRender=void 0,this.exampleCellValue=(i=0,n=8,Math.floor(Math.random()*n)+i),this.pieceLength=t.defaultCellSize,this.gapSize=t.gridGapSize,this.simpleRender=t.simpleRender,this.setSpinningCubes(t.spinningCubes),this.invisiblePieceCanvas=document.createElement("canvas"),this.invisiblePieceCanvas.height=this.pieceLength+2,this.invisiblePieceCanvas.width=this.pieceLength+2,this.drawInvisiblePiece(this.invisiblePieceCanvas.getContext("2d"),1,1),this.invisibleMarkedPieceCanvas=document.createElement("canvas"),this.invisibleMarkedPieceCanvas.height=this.pieceLength+2,this.invisibleMarkedPieceCanvas.width=this.pieceLength+2,this.drawInvisiblePiece(this.invisibleMarkedPieceCanvas.getContext("2d"),1,1,"#3396ff");for(var s=0;s<18;s++){this.staticPieceCanvas[s]=document.createElement("canvas"),this.staticPieceCanvas[s].width=this.pieceLength+2,this.staticPieceCanvas[s].height=this.pieceLength+2;var r=this.staticPieceCanvas[s].getContext("2d");if(s<8)this.drawVisibleCell(r,1,1.5,s+1);else if(s<16){var l=s%8+1;this.drawVisibleCell(r,1,1.5,l,"#3396ff")}else s<17?this.drawVisibleCell(r,1,1.5,0):this.drawVisibleCell(r,1,1.5,void 0)}}return Object(n.a)(e,[{key:"setCellSize",value:function(e){this.pieceLength=e,this.invisiblePieceCanvas.height=e,this.invisiblePieceCanvas.width=e,this.invisibleMarkedPieceCanvas.height=e,this.invisibleMarkedPieceCanvas.width=e;for(var t=0;t<18;t++){this.staticPieceCanvas[t].width=e,this.staticPieceCanvas[t].height=e;var i=this.staticPieceCanvas[t].getContext("2d");if(t<8)this.drawVisibleCell(i,0,0,t+1);else if(t<16){var a=t%8+1;this.drawVisibleCell(i,0,0,a,"#3396ff")}else t<17?this.drawVisibleCell(i,0,0,0):this.drawVisibleCell(i,0,0,void 0)}}},{key:"setGapSize",value:function(e){this.gapSize=e}},{key:"setSpinningCubes",value:function(e){this.pieceAnimations=[];for(var t=e+1;t>=1;t--)this.pieceAnimations.push(new s.b(90*t,Math.pow(t+1,.035*t)-1,s.a.ALTERNATE))}},{key:"setSimpleRender",value:function(e){this.simpleRender=e}},{key:"update",value:function(e){if(!this.simpleRender){for(var t=0;t<this.pieceAnimations.length;t++)this.pieceAnimations[t].update(e);var i=this.invisiblePieceCanvas.getContext("2d"),a=this.invisibleMarkedPieceCanvas.getContext("2d");i.clearRect(0,0,this.pieceLength,this.pieceLength),a.clearRect(0,0,this.pieceLength,this.pieceLength),this.drawInvisiblePiece(i,1,1),this.drawInvisiblePiece(a,1,1,"#3396ff")}}},{key:"drawPlaceHolder",value:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.b.INVISIBLE;switch(e.save(),a){case r.b.INVISIBLE:this.drawInvisiblePiece(e,t,i);break;case r.b.MARKED:this.drawInvisiblePiece(e,t,i,"#3396ff");break;case r.b.VISIBLE:this.drawVisibleCell(e,t,i,this.exampleCellValue);break;case r.b.VISIBLY_SATISFIED:this.drawVisibleCell(e,t,i,this.exampleCellValue,"#3396ff")}e.restore()}},{key:"drawPiece",value:function(e,t,i,a){if(t.visibility===r.b.INVISIBLE)e.drawImage(this.invisiblePieceCanvas,i,a),t.hover&&this.drawHover(e,i+1,a+1);else if(t.visibility===r.b.MARKED)e.drawImage(this.invisibleMarkedPieceCanvas,i,a);else{var n=this.getIndexByCell(t);e.drawImage(this.staticPieceCanvas[n],i,a)}}},{key:"getIndexByCell",value:function(e){return Object(r.c)(e.value)?17:0===e.value?16:e.visibility===r.b.VISIBLY_SATISFIED?e.value-1+8:e.value-1}},{key:"drawInvisiblePiece",value:function(e,t,i,a){if(e.save(),e.beginPath(),e.strokeStyle=a||"#FFF",this.drawRectangle(e,t,i,this.pieceLength/8,this.pieceLength),e.lineWidth=2,e.stroke(),e.closePath(),e.restore(),!this.simpleRender){e.save();for(var n=this.pieceLength,s=0,r=1;r<this.pieceAnimations.length;r++){var l=r%2===0?1:-1;this.drawRotatingSquare(e,s+t,s+i,n,r,l,a),s+=n/4/2,n=n/4*3}e.restore()}}},{key:"drawRotatingSquare",value:function(e,t,i,a,n,s,r){var l=a/8,c=a/2+2*l,h=t+a/4-l,o=i+a/4-l;e.save(),e.beginPath(),e.translate(h+c/2,o+c/2),e.rotate(this.pieceAnimations[n].getValue()*Math.PI/180),e.translate(-1*(h+c/2),-1*(o+c/2)),this.drawRectangle(e,h,o,l,c),e.lineWidth=2,e.strokeStyle=r||"gray",e.closePath(),e.stroke(),e.restore()}},{key:"drawRectangle",value:function(e,t,i,a,n){e.moveTo(t+a,i),e.lineTo(t+n-a,i),e.quadraticCurveTo(t+n,i,t+n,i+a),e.lineTo(t+n,i+n-a),e.quadraticCurveTo(t+n,i+n,t+n-a,i+n),e.lineTo(t+a,i+n),e.quadraticCurveTo(t,i+n,t,i+n-a),e.lineTo(t,i+a),e.quadraticCurveTo(t,i,t+a,i)}},{key:"drawHover",value:function(e,t,i){e.save();for(var a=1,n=1;n<=this.gapSize/2;n++)e.beginPath(),e.strokeStyle="rgba(255,255,255, ".concat(a,")"),this.drawRectangle(e,t-n,i-n,this.pieceLength/8,this.pieceLength+2*n),n+1>=this.gapSize/2?e.lineWidth=1:e.lineWidth=2,a-=.1,e.stroke(),e.closePath();e.restore()}},{key:"drawVisibleCell",value:function(e,t,i,a,n){e.save(),e.beginPath();var s=this.pieceLength;if(Object(r.c)(a)){e.save(),e.beginPath(),e.arc(t+s/2,i+s/2,s/2,0,2*Math.PI),e.strokeStyle="#690721",e.lineWidth=4,e.stroke(),e.closePath(),e.restore(),e.save(),e.beginPath(),s-=6,e.arc(t+3+s/2,i+3+s/2,s/2,0,2*Math.PI),e.strokeStyle="#f00f4b",e.lineWidth=3;var l=t+s/2,c=i+s/2,h=e.createRadialGradient(l,c,this.pieceLength/6,l,c,this.pieceLength/2);h.addColorStop(0,"#333"),h.addColorStop(1,"#690721"),e.fillStyle=h,e.fill(),e.stroke(),e.closePath(),e.restore()}else if(0===a)this.drawRectangle(e,t,i,this.pieceLength/8,this.pieceLength),e.lineWidth=3,e.strokeStyle="gray";else{n?(e.fillStyle=n,e.strokeStyle=n):(e.fillStyle="#FFFFFF",e.strokeStyle="#FFFFFF"),e.font="normal ".concat(this.pieceLength,"px sans-serif");var o=this.pieceLength/2+2,u=i+this.pieceLength/2+o,d=t+this.pieceLength/2;e.textAlign="center",e.textBaseline="bottom",e.arc(t+s/2,i+s/2,s/2,0,2*Math.PI),e.lineWidth=2,e.fillText(String(a),d,u)}e.closePath(),e.stroke(),e.restore()}}]),e}()},66:function(e,t,i){"use strict";function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",function(){return a})},67:function(e,t,i){},68:function(e,t,i){"use strict";var a=i(0),n=i.n(a);i(69);t.a=function(e){var t=e.text,i=e.name,a=e.checked,s=e.onChange;return n.a.createElement("label",{className:"checkbox"},n.a.createElement("input",{type:"checkbox",name:i,checked:a,onChange:s}),n.a.createElement("span",null,t))}},69:function(e,t,i){},70:function(e,t,i){"use strict";i.d(t,"a",function(){return O});var a,n,s,r,l,c,h,o,u,d,v,p,b,f,g,m,C,S=i(1),w=i.n(S),k=i(3),y=i(4),I=i(8),E=i(9),P=i(5),L=(i(26),i(2)),O=(a=Object(L.c)("settings"),n=Object(L.a)("settings",!0),s=Object(L.a)("settings"),r=Object(L.a)("settings"),l=Object(L.a)("settings"),c=Object(L.a)("settings"),h=Object(L.a)("settings"),o=Object(L.a)("settings"),a((d=function(){function e(){Object(I.a)(this,e),this.tableName="settings",Object(y.a)(this,"id",v,this),Object(y.a)(this,"defaultCellSize",p,this),Object(y.a)(this,"gridGapSize",b,this),Object(y.a)(this,"spinningCubes",f,this),Object(y.a)(this,"simpleRender",g,this),Object(y.a)(this,"vibration",m,this),Object(y.a)(this,"timestamp",C,this)}return Object(E.a)(e,null,[{key:"GetPreferences",value:function(){var t=Object(k.a)(w.a.mark(function t(){var i,a;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=new e,t.next=3,L.b.getById(i,i.id);case 3:if(void 0!==(a=t.sent)){t.next=8;break}return t.abrupt("return",i);case 8:return t.abrupt("return",a);case 9:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"Save",value:function(){var t=Object(k.a)(w.a.mark(function t(i){var a;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i.timestamp=new Date,a=Object.assign(new e,i),t.next=4,L.b.save(a);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}]),e}(),v=Object(P.a)(d.prototype,"id",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"preferences"}}),p=Object(P.a)(d.prototype,"defaultCellSize",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 35}}),b=Object(P.a)(d.prototype,"gridGapSize",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8.5}}),f=Object(P.a)(d.prototype,"spinningCubes",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 7}}),g=Object(P.a)(d.prototype,"simpleRender",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=Object(P.a)(d.prototype,"vibration",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=Object(P.a)(d.prototype,"timestamp",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Date}}),u=d))||u)},86:function(e,t,i){},87:function(e,t,i){}}]);
//# sourceMappingURL=3.c6995ff9.chunk.js.map