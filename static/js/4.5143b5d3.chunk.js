(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{105:function(e,t,i){"use strict";i.r(t);var n=i(1),a=i.n(n),s=i(3),r=i(61),l=i(9),c=i(10),h=i(16),u=i(15),o=i(17),d=i(0),v=i.n(d),b=i(71),p=i(69),f=(i(87),i(68),function(e){var t=e.text,i=e.name,n=e.value,a=e.max,s=e.min,r=e.onChange,l=a||100,c=s||0;return v.a.createElement("div",{className:"form-input slider"},v.a.createElement("label",{htmlFor:i},t," (",n,")"),v.a.createElement("input",{type:"range",id:i,name:i,value:n,max:l,min:c,onChange:r}))}),m=i(20),g=i(60),C=i(65);i(88);i.d(t,"default",function(){return E});var E=function(e){function t(){var e,i;Object(l.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(i=Object(h.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).keepUpdating=!0,i.rafId=0,i.canvas=void 0,i.ctx=void 0,i.pieceRenderer=void 0,i.handleChange=function(e){var t,n=e.target;"checkbox"===n.type?t=n.checked:(t=parseInt(n.value,10),isNaN(t)&&(t=0));var a=n.name;switch(a){case"defaultCellSize":i.pieceRenderer.setCellSize(t);break;case"gridGapSize":i.pieceRenderer.setGapSize(t);break;case"spinningCubes":i.pieceRenderer.setSpinningCubes(t);break;case"simpleRender":i.pieceRenderer.setSimpleRender(t)}i.setState(Object(r.a)({},a,t))},i.handleSubmit=function(e){e.preventDefault(),i.setState({timestamp:new Date}),b.a.Save(i.state)},i.draw=function(e){var t=2*i.state.defaultCellSize+i.state.gridGapSize;i.ctx.fillStyle="#333",i.ctx.fillRect(0,0,t,t),i.pieceRenderer.update(.0167),[0,0,1,1].forEach(function(e,t){var n=t%2,a=3+n*i.state.defaultCellSize+i.state.gridGapSize*n,s=3+e*i.state.defaultCellSize+i.state.gridGapSize*e;i.pieceRenderer.drawPlaceHolder(i.ctx,a,s,t)}),i.keepUpdating&&(i.rafId=requestAnimationFrame(i.draw))},i}return Object(o.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.GetPreferences();case 2:t=e.sent,this.setState(t),this.canvas=document.getElementById("preview"),this.ctx=this.canvas.getContext("2d"),this.pieceRenderer=new C.a(t),requestAnimationFrame(this.draw);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.keepUpdating=!1,cancelAnimationFrame(this.rafId)}},{key:"render",value:function(){if(!this.state)return v.a.createElement(m.a,null);var e=2*this.state.defaultCellSize+2*this.state.gridGapSize;return v.a.createElement("div",{className:"settings"},v.a.createElement("h1",null,"Settings"),v.a.createElement("form",{onSubmit:this.handleSubmit},v.a.createElement(f,{text:"Piece Length",name:"defaultCellSize",max:125,min:25,value:this.state.defaultCellSize,onChange:this.handleChange}),v.a.createElement(f,{text:"Piece Gap",name:"gridGapSize",max:50,min:0,value:this.state.gridGapSize,onChange:this.handleChange}),v.a.createElement(f,{text:"Spinning Cubes",name:"spinningCubes",max:8,min:1,value:this.state.spinningCubes,onChange:this.handleChange}),v.a.createElement(p.a,{text:"Simple Render",name:"simpleRender",checked:this.state.simpleRender,onChange:this.handleChange}),v.a.createElement("h3",null,"Grid Preview"),v.a.createElement("div",{className:"form-input center"},v.a.createElement("canvas",{id:"preview",width:e,height:e})),v.a.createElement(p.a,{text:"Can't lose on first move",name:"firstMoveHandicap",checked:this.state.firstMoveHandicap,onChange:this.handleChange}),v.a.createElement(p.a,{text:"Vibrant Colors",name:"vibrantColors",checked:this.state.vibrantColors,onChange:this.handleChange}),v.a.createElement(p.a,{text:"Vibrations",name:"vibration",checked:this.state.vibration,onChange:this.handleChange}),v.a.createElement(g.a,{type:"submit",text:"Save Changes"})),v.a.createElement("p",null,v.a.createElement("small",null,v.a.createElement("strong",null,"Last saved: "),v.a.createElement("time",null,this.state.timestamp.toLocaleString()))))}}]),t}(d.Component)},59:function(e,t,i){},60:function(e,t,i){"use strict";var n=i(0),a=i.n(n);i(59);t.a=function(e){var t=e.type,i=e.disabled,n=e.className,s=e.text,r=e.onClick,l=i?"button disabled":"button",c=n?"".concat(n," ").concat(l):l;return r?a.a.createElement("button",{className:c,disabled:i,type:t,onClick:r},s):a.a.createElement("button",{className:c,disabled:i,type:t},s)}},61:function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",function(){return n})},62:function(e,t,i){"use strict";var n;i.d(t,"b",function(){return n}),i.d(t,"h",function(){return s}),i.d(t,"f",function(){return r}),i.d(t,"g",function(){return l}),i.d(t,"a",function(){return a}),i.d(t,"d",function(){return c}),i.d(t,"c",function(){return h}),i.d(t,"e",function(){return u}),function(e){e[e.INVISIBLE=0]="INVISIBLE",e[e.VISIBLE=1]="VISIBLE",e[e.VISIBLY_SATISFIED=2]="VISIBLY_SATISFIED",e[e.MARKED=3]="MARKED"}(n||(n={}));var a,s=function(e){return e===n.VISIBLE||e===n.VISIBLY_SATISFIED},r=function(e){return e===n.MARKED||e===n.INVISIBLE},l=function(e){return e.visibility===n.MARKED};!function(e){e[e.BOMB=0]="BOMB",e[e.CLEAN=1]="CLEAN"}(a||(a={}));var c=function(e){switch(e){case 0:return 1;case 1:return 2;case 2:return 3;case 3:return 4;case 4:return 5;case 5:return 6;case 6:return 7;case 7:case 8:return 8;default:return null}},h=function(e){switch(e){case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4;case 6:return 5;case 7:return 6;case 8:return 7;case 0:return 0;default:return null}},u=function(e){return null===e||void 0===e}},63:function(e,t,i){"use strict";function n(e,t){return Math.floor(Math.random()*t)+e}i.d(t,"a",function(){return n})},65:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var n=i(9),a=i(10),s=i(62),r=i(63),l=function(){function e(t){Object(n.a)(this,e),this.RECTANGLE_REDIS_DEGREE=6,this.LINE_WIDTH_DEGREE=20,this.ROTATING_LINE_WIDTH_DEGREE=60,this.PIECE_MARKED_COLOR="#3396ff",this.invisiblePieceCanvas=void 0,this.invisibleMarkedPieceCanvas=void 0,this.staticPieceCanvas=[],this.pieceAnimations=[],this.lineWidth=void 0,this.pieceLength=void 0,this.gapSize=void 0,this.simpleRender=void 0,this.exampleCellValue=Object(r.a)(0,8),this.reverseTiming=!1,this.lineWidth=t.defaultCellSize/this.LINE_WIDTH_DEGREE,this.pieceLength=t.defaultCellSize-2*this.lineWidth,this.gapSize=t.gridGapSize,this.simpleRender=t.simpleRender,this.setSpinningCubes(t.spinningCubes),this.invisiblePieceCanvas=document.createElement("canvas"),this.invisiblePieceCanvas.height=t.defaultCellSize,this.invisiblePieceCanvas.width=t.defaultCellSize,this.drawInvisiblePiece(this.invisiblePieceCanvas.getContext("2d"),this.lineWidth,this.lineWidth),this.invisibleMarkedPieceCanvas=document.createElement("canvas"),this.invisibleMarkedPieceCanvas.height=t.defaultCellSize,this.invisibleMarkedPieceCanvas.width=t.defaultCellSize,this.drawInvisiblePiece(this.invisibleMarkedPieceCanvas.getContext("2d"),this.lineWidth,this.lineWidth,this.PIECE_MARKED_COLOR);for(var i=0;i<18;i++){this.staticPieceCanvas[i]=document.createElement("canvas"),this.staticPieceCanvas[i].width=t.defaultCellSize,this.staticPieceCanvas[i].height=t.defaultCellSize;var a=this.staticPieceCanvas[i].getContext("2d");if(i<8)this.drawVisibleCell(a,this.lineWidth,this.lineWidth,i+1);else if(i<16){var s=i%8+1;this.drawVisibleCell(a,this.lineWidth,this.lineWidth,s,this.PIECE_MARKED_COLOR)}else i<17?this.drawVisibleCell(a,this.lineWidth,this.lineWidth,0):this.drawVisibleCell(a,this.lineWidth,this.lineWidth,void 0)}}return Object(a.a)(e,[{key:"setCellSize",value:function(e){this.lineWidth=e/this.LINE_WIDTH_DEGREE,this.pieceLength=e-2*this.lineWidth,this.invisiblePieceCanvas.height=e,this.invisiblePieceCanvas.width=e,this.invisibleMarkedPieceCanvas.height=e,this.invisibleMarkedPieceCanvas.width=e;for(var t=0;t<18;t++){this.staticPieceCanvas[t].width=e,this.staticPieceCanvas[t].height=e;var i=this.staticPieceCanvas[t].getContext("2d");if(t<8)this.drawVisibleCell(i,0,0,t+1);else if(t<16){var n=t%8+1;this.drawVisibleCell(i,0,0,n,this.PIECE_MARKED_COLOR)}else t<17?this.drawVisibleCell(i,0,0,0):this.drawVisibleCell(i,0,0,void 0)}}},{key:"setGapSize",value:function(e){this.gapSize=e}},{key:"setSpinningCubes",value:function(e){this.pieceAnimations=[];for(var t=e+1;t>=1;t--)this.pieceAnimations.push(0)}},{key:"setSimpleRender",value:function(e){this.simpleRender=e}},{key:"update",value:function(e){if(!this.simpleRender&&0!==this.pieceAnimations.length){for(var t=[],i=0;i<this.pieceAnimations.length;i++){var n=i;this.reverseTiming&&(n=this.pieceAnimations.length-i);var a=this.pieceAnimations[n],s=this.pieceAnimations[n]+e*n*1;this.reverseTiming?Math.sin(s)<Math.sin(a)?(this.pieceAnimations[n]=s,t.push(!1)):t.push(!0):Math.sin(s)>Math.sin(a)?(this.pieceAnimations[n]=s,t.push(!0)):t.push(!1)}t.every(function(e){return e===t[0]})&&(this.reverseTiming=!this.reverseTiming);var r=this.invisiblePieceCanvas.getContext("2d"),l=this.invisibleMarkedPieceCanvas.getContext("2d"),c=this.pieceLength+2*this.lineWidth;r.clearRect(0,0,c,c),l.clearRect(0,0,c,c),this.drawInvisiblePiece(r,this.lineWidth,this.lineWidth),this.drawInvisiblePiece(l,this.lineWidth,this.lineWidth,this.PIECE_MARKED_COLOR)}}},{key:"drawPlaceHolder",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.b.INVISIBLE;switch(e.save(),n){case s.b.INVISIBLE:this.drawInvisiblePiece(e,t,i);break;case s.b.MARKED:this.drawInvisiblePiece(e,t,i,this.PIECE_MARKED_COLOR);break;case s.b.VISIBLE:this.drawVisibleCell(e,t,i,this.exampleCellValue);break;case s.b.VISIBLY_SATISFIED:this.drawVisibleCell(e,t,i,this.exampleCellValue,this.PIECE_MARKED_COLOR)}e.restore()}},{key:"drawPiece",value:function(e,t,i,n){if(t.visibility===s.b.INVISIBLE){if(e.drawImage(this.invisiblePieceCanvas,i,n),t.hover){var a=this.lineWidth/2;this.drawHover(e,i+a,n+a)}}else if(t.visibility===s.b.MARKED)e.drawImage(this.invisibleMarkedPieceCanvas,i,n);else{var r=this.getIndexByCell(t);e.drawImage(this.staticPieceCanvas[r],i,n)}}},{key:"getIndexByCell",value:function(e){return Object(s.e)(e.value)?17:0===e.value?16:e.visibility===s.b.VISIBLY_SATISFIED?e.value-1+8:e.value-1}},{key:"drawInvisiblePiece",value:function(e,t,i,n){if(!this.simpleRender){e.save();for(var a=.9*this.pieceLength,s=.05*this.pieceLength,r=1;r<this.pieceAnimations.length+1;r++){var l=Math.sin(this.pieceAnimations[r]),c=this.pieceAnimations.length-1;a+=l*Math.pow(c,.25),s+=l*-Math.pow(c,.25)/2,this.drawRotatingSquare(e,s+t,i+s,a,r,l,n),s+=a/4/2,a=a/4*3}e.restore()}e.save(),e.beginPath(),e.strokeStyle=n||"#FFF",this.drawSquare(e,t,i,this.pieceLength/this.RECTANGLE_REDIS_DEGREE,this.pieceLength),e.lineWidth=this.lineWidth,e.stroke(),e.closePath(),e.restore()}},{key:"drawRotatingSquare",value:function(e,t,i,n,a,s,r){var l=n/this.RECTANGLE_REDIS_DEGREE,c=n/2+2*l,h=t+n/4-l,u=i+n/4-l;e.save(),e.beginPath(),e.translate(h+ +c/2,u+c/2),e.rotate(s),e.translate(-1*(h+c/2),-1*(u+c/2)),this.drawSquare(e,h,u,l,c);var o=this.pieceLength/this.ROTATING_LINE_WIDTH_DEGREE;o<1&&(o=1),e.lineWidth=o,e.strokeStyle=r||"rgba(255, 255, 255, 0.4)",e.closePath(),e.stroke(),e.restore()}},{key:"drawSquare",value:function(e,t,i,n,a){e.moveTo(t+n,i),e.lineTo(t+a-n,i),e.quadraticCurveTo(t+a,i,t+a,i+n),e.lineTo(t+a,i+a-n),e.quadraticCurveTo(t+a,i+a,t+a-n,i+a),e.lineTo(t+n,i+a),e.quadraticCurveTo(t,i+a,t,i+a-n),e.lineTo(t,i+n),e.quadraticCurveTo(t,i,t+n,i)}},{key:"drawHover",value:function(e,t,i){e.save();var n=this.gapSize/2,a=1,s=1/n;t+=(1+this.lineWidth)/2,i+=(1+this.lineWidth)/2;for(var r=1;r<=n;r++)e.beginPath(),e.strokeStyle="rgba(255,255,255, ".concat(a,")"),this.drawSquare(e,t-r,i-r,this.pieceLength/this.RECTANGLE_REDIS_DEGREE,this.pieceLength+2*r),r+1>=this.gapSize/2?e.lineWidth=1:e.lineWidth=2,a-=s,e.stroke(),e.closePath();e.restore()}},{key:"drawVisibleCell",value:function(e,t,i,n,a){e.save(),e.beginPath();var r=this.pieceLength;if(Object(s.e)(n)){e.save(),e.beginPath(),e.arc(t+r/2,i+r/2,r/2,0,2*Math.PI),e.strokeStyle="#690721",e.lineWidth=4,e.stroke(),e.closePath(),e.restore(),e.save(),e.beginPath(),r-=6,e.arc(t+3+r/2,i+3+r/2,r/2,0,2*Math.PI),e.strokeStyle="#f00f4b",e.lineWidth=3;var l=t+r/2,c=i+r/2,h=e.createRadialGradient(l,c,this.pieceLength/6,l,c,this.pieceLength/2);h.addColorStop(0,"#333"),h.addColorStop(1,"#690721"),e.fillStyle=h,e.fill(),e.stroke(),e.closePath(),e.restore()}else if(0===n)this.drawSquare(e,t,i,this.pieceLength/this.RECTANGLE_REDIS_DEGREE,this.pieceLength),e.lineWidth=this.lineWidth,e.strokeStyle="gray";else{a?(e.fillStyle=a,e.strokeStyle=a):(e.fillStyle="#FFFFFF",e.strokeStyle="#FFFFFF"),e.font="normal ".concat(this.pieceLength,"px sans-serif");var u=this.pieceLength/2+1.5*this.lineWidth,o=i+this.pieceLength/2+u,d=t+this.pieceLength/2;e.textAlign="center",e.textBaseline="bottom",e.arc(t+r/2,i+r/2,r/2,0,2*Math.PI),e.lineWidth=this.lineWidth,e.fillText(String(n),d,o)}e.closePath(),e.stroke(),e.restore()}}]),e}()},68:function(e,t,i){},69:function(e,t,i){"use strict";var n=i(0),a=i.n(n);i(70);t.a=function(e){var t=e.text,i=e.name,n=e.checked,s=e.onChange;return a.a.createElement("label",{className:"checkbox"},a.a.createElement("input",{type:"checkbox",name:i,checked:n,onChange:s}),a.a.createElement("span",null,t))}},70:function(e,t,i){},71:function(e,t,i){"use strict";i.d(t,"a",function(){return z});var n,a,s,r,l,c,h,u,o,d,v,b,p,f,m,g,C,E,S,I,w,R=i(1),k=i.n(R),P=i(3),O=i(4),y=i(9),L=i(10),x=i(5),j=(i(26),i(2)),z=(n=Object(j.c)("settings"),a=Object(j.a)("settings",!0),s=Object(j.a)("settings"),r=Object(j.a)("settings"),l=Object(j.a)("settings"),c=Object(j.a)("settings"),h=Object(j.a)("settings"),u=Object(j.a)("settings"),o=Object(j.a)("settings"),d=Object(j.a)("settings"),n((b=function(){function e(){Object(y.a)(this,e),this.tableName="settings",Object(O.a)(this,"id",p,this),Object(O.a)(this,"defaultCellSize",f,this),Object(O.a)(this,"gridGapSize",m,this),Object(O.a)(this,"spinningCubes",g,this),Object(O.a)(this,"simpleRender",C,this),Object(O.a)(this,"firstMoveHandicap",E,this),Object(O.a)(this,"vibrantColors",S,this),Object(O.a)(this,"vibration",I,this),Object(O.a)(this,"timestamp",w,this)}return Object(L.a)(e,null,[{key:"GetPreferences",value:function(){var t=Object(P.a)(k.a.mark(function t(){var i,n;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=new e,t.next=3,j.b.getById(i,i.id);case 3:if(void 0!==(n=t.sent)){t.next=8;break}return t.abrupt("return",i);case 8:return t.abrupt("return",n);case 9:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"Save",value:function(){var t=Object(P.a)(k.a.mark(function t(i){var n;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i.timestamp=new Date,n=Object.assign(new e,i),t.next=4,j.b.save(n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}]),e}(),p=Object(x.a)(b.prototype,"id",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"preferences"}}),f=Object(x.a)(b.prototype,"defaultCellSize",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 35}}),m=Object(x.a)(b.prototype,"gridGapSize",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8.5}}),g=Object(x.a)(b.prototype,"spinningCubes",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 7}}),C=Object(x.a)(b.prototype,"simpleRender",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=Object(x.a)(b.prototype,"firstMoveHandicap",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),S=Object(x.a)(b.prototype,"vibrantColors",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=Object(x.a)(b.prototype,"vibration",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Object(x.a)(b.prototype,"timestamp",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Date}}),v=b))||v)},87:function(e,t,i){},88:function(e,t,i){}}]);
//# sourceMappingURL=4.5143b5d3.chunk.js.map